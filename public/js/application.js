angular.module("votaCampinas",["ngRoute","satellizer"]).config(["$routeProvider","$locationProvider","$authProvider",function(t,r,a){function e(t,r){r.isAuthenticated()&&t.path("/")}function o(t,r){r.isAuthenticated()||t.path("/login")}e.$inject=["$location","$auth"],o.$inject=["$location","$auth"],r.html5Mode(!0),t.when("/",{templateUrl:"partials/login/login.html",controller:"loginController"}).when("/ranking",{templateUrl:"partials/ranking/ranking.html",controller:"rankingController"}).when("/cadastro",{templateUrl:"partials/cadastro/cadastro.html",controller:"cadastroController"}).when("/prioridades",{templateUrl:"partials/prioridades/prioridades.html",controller:"prioridadesController"}).when("/perfil",{templateUrl:"partials/perfil/perfil.html",controller:"perfilController"}).when("/contact",{templateUrl:"partials/contact.html",controller:"ContactCtrl"}).when("/login",{templateUrl:"partials/login.html",controller:"LoginCtrl",resolve:{skipIfAuthenticated:e}}).when("/signup",{templateUrl:"partials/signup.html",controller:"SignupCtrl",resolve:{skipIfAuthenticated:e}}).when("/account",{templateUrl:"partials/profile.html",controller:"ProfileCtrl",resolve:{loginRequired:o}}).when("/forgot",{templateUrl:"partials/forgot.html",controller:"ForgotCtrl",resolve:{skipIfAuthenticated:e}}).when("/reset/:token",{templateUrl:"partials/reset.html",controller:"ResetCtrl",resolve:{skipIfAuthenticated:e}}).otherwise({templateUrl:"partials/404.html"}),a.loginUrl="/login",a.signupUrl="/signup",a.facebook({url:"/auth/facebook",clientId:"980220002068787",redirectUri:"http://localhost:3000/auth/facebook/callback"})}]).run(["$rootScope","$window",function(t,r){r.localStorage.user&&(t.currentUser=JSON.parse(r.localStorage.user))}]),angular.module("votaCampinas").controller("ContactCtrl",["$scope","Contact",function(t,r){t.sendContactForm=function(){r.send(t.contact).then(function(r){t.messages={success:[r.data]}})["catch"](function(r){t.messages={error:Array.isArray(r.data)?r.data:[r.data]}})}}]),angular.module("votaCampinas").controller("ForgotCtrl",["$scope","Account",function(t,r){t.forgotPassword=function(){r.forgotPassword(t.user).then(function(r){t.messages={success:[r.data]}})["catch"](function(r){t.messages={error:Array.isArray(r.data)?r.data:[r.data]}})}}]),angular.module("votaCampinas").controller("HeaderCtrl",["$scope","$location","$window","$auth",function(t,r,a,e){t.isActive=function(t){return t===r.path()},t.isAuthenticated=function(){return e.isAuthenticated()},t.logout=function(){e.logout(),delete a.localStorage.user,r.path("/")}}]),angular.module("votaCampinas").controller("LoginCtrl",["$scope","$rootScope","$location","$window","$auth",function(t,r,a,e,o){t.login=function(){o.login(t.user).then(function(t){r.currentUser=t.data.user,e.localStorage.user=JSON.stringify(t.data.user),a.path("/account")})["catch"](function(r){t.messages={error:Array.isArray(r.data)?r.data:[r.data]}})},t.authenticate=function(n){o.authenticate(n).then(function(t){r.currentUser=t.data.user,e.localStorage.user=JSON.stringify(t.data.user),a.path("/")})["catch"](function(r){r.error?t.messages={error:[{msg:r.error}]}:r.data&&(t.messages={error:[r.data]})})}}]),angular.module("votaCampinas").controller("ProfileCtrl",["$scope","$rootScope","$location","$window","$auth","Account",function(t,r,a,e,o,n){t.profile=r.currentUser,t.updateProfile=function(){n.updateProfile(t.profile).then(function(a){r.currentUser=a.data.user,e.localStorage.user=JSON.stringify(a.data.user),t.messages={success:[a.data]}})["catch"](function(r){t.messages={error:Array.isArray(r.data)?r.data:[r.data]}})},t.changePassword=function(){n.changePassword(t.profile).then(function(r){t.messages={success:[r.data]}})["catch"](function(r){t.messages={error:Array.isArray(r.data)?r.data:[r.data]}})},t.link=function(r){o.link(r).then(function(r){t.messages={success:[r.data]}})["catch"](function(r){e.scrollTo(0,0),t.messages={error:[r.data]}})},t.unlink=function(r){o.unlink(r).then(function(){t.messages={success:[response.data]}})["catch"](function(r){t.messages={error:[r.data]}})},t.deleteAccount=function(){n.deleteAccount().then(function(){o.logout(),delete e.localStorage.user,a.path("/")})["catch"](function(r){t.messages={error:[r.data]}})}}]),angular.module("votaCampinas").controller("ResetCtrl",["$scope","Account",function(t,r){t.resetPassword=function(){r.resetPassword(t.user).then(function(r){t.messages={success:[r.data]}})["catch"](function(r){t.messages={error:Array.isArray(r.data)?r.data:[r.data]}})}}]),angular.module("votaCampinas").controller("SignupCtrl",["$scope","$rootScope","$location","$window","$auth",function(t,r,a,e,o){t.signup=function(){console.log(t.user),o.signup(t.user).then(function(t){o.setToken(t),r.currentUser=t.data.user,e.localStorage.user=JSON.stringify(t.data.user),a.path("/")})["catch"](function(r){t.messages={error:Array.isArray(r.data)?r.data:[r.data]}})},t.authenticate=function(n){o.authenticate(n).then(function(t){r.currentUser=t.data.user,e.localStorage.user=JSON.stringify(t.data.user),a.path("/")})["catch"](function(r){r.error?t.messages={error:[{msg:r.error}]}:r.data&&(t.messages={error:[r.data]})})}}]),angular.module("votaCampinas").factory("Account",["$http",function(t){return{updateProfile:function(r){return t.put("/account",r)},changePassword:function(r){return t.put("/account",r)},deleteAccount:function(){return t["delete"]("/account")},forgotPassword:function(r){return t.post("/forgot",r)},resetPassword:function(r){return t.post("/reset",r)}}}]),angular.module("votaCampinas").factory("Contact",["$http",function(t){return{send:function(r){return t.post("/contact",r)}}}]),function(){"use strict";var t=angular.module("votaCampinas"),r=function(t,r,a,e,o){t.user={},t.user.birthDate="16/11/1994",t.enviar=function(){t.user.gender=$("#sexo").val(),console.log(t.user),o.signup(t.user).then(function(t){o.setToken(t),r.currentUser=t.data.user,e.localStorage.user=JSON.stringify(t.data.user),a.path("/account")})["catch"](function(r){t.messages={error:Array.isArray(r.data)?r.data:[r.data]}})},t.authenticate=function(n){o.authenticate(n).then(function(t){r.currentUser=t.data.user,e.localStorage.user=JSON.stringify(t.data.user),a.path("/")})["catch"](function(r){r.error?t.messages={error:[{msg:r.error}]}:r.data&&(t.messages={error:[r.data]})})},$("select").material_select(),$("#data-nascimento").mask("00/00/0000")};r.$inject=["$scope","$rootScope","$location","$window","$auth"],t.controller("cadastroController",r)}(),function(){"use strict";var t=angular.module("votaCampinas"),r=function(t,r,a,e,o){t.enviar=function(){o.login(t.user).then(function(t){r.currentUser=t.data.user,e.localStorage.user=JSON.stringify(t.data.user),a.path("/account")})["catch"](function(r){t.messages={error:Array.isArray(r.data)?r.data:[r.data]}})},t.authenticate=function(n){o.authenticate(n).then(function(t){r.currentUser=t.data.user,e.localStorage.user=JSON.stringify(t.data.user),a.path("/")})["catch"](function(r){r.error?t.messages={error:[{msg:r.error}]}:r.data&&(t.messages={error:[r.data]})})}};r.$inject=["$scope","$rootScope","$location","$window","$auth"],t.controller("loginController",r)}(),function(){"use strict";var t=angular.module("votaCampinas"),r=function(t){};r.$inject=["$scope"],t.controller("perfilController",r)}(),function(){"use strict";var t=angular.module("votaCampinas"),r=function(t){};r.$inject=["$scope"],t.controller("prioridadesController",r)}(),function(){"use strict";var t=angular.module("votaCampinas"),r=function(t){};r.$inject=["$scope"],t.controller("rankingController",r)}();